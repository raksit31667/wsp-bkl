{% extends 'base.html' %}
{% block title %} Filter {% endblock %}
{% block content %}
<div class="grid">
  <form action="{% url 'movie:filter' %}" method="post">
    {% csrf_token %}
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="col-xs-6 col-sm-3 col-sm-push-6 col-md-3 col-md-push-8 col-lg-3 col-lg-push-8">
        <select name="dropdown_genre" onchange="form.submit();">
          <option value=0>All movies</option>
          {% for genre in all_genres %}
            {% if selected_genre and genre == selected_genre %}
              <option value={{genre.id}} selected="selected">{{genre.genre_name}}</option>
            {% else %}
              <option value={{genre.id}}>{{genre.genre_name}}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="col-xs-6 col-sm-3 col-sm-push-6 col-md-3 col-md-push-7 col-lg-3 col-lg-push-7">
        <select name="dropdown_sortby" onchange="form.submit();">
          {% if selected_sortby is None or selected_sortby == "movie_name" %}
            <option value="movie_name" selected="selected">A-Z</option>
            <option value="release_year">Release Year</option>

          {% elif selected_sortby == "release_year" %}
            <option value="movie_name">A-Z</option>
            <option value="release_year" selected="selected">Release Year</option>

          {% endif %}
        </select>
      </div>

    </div>

    <div class="grid">
      <div class="app-content-row">
        {% if selected_genre is None %}
          <div class="col-xs-12 col-sm-12 col-md-10 col-lg-10"><span class="topic-genre">All Movies</span></div>
        {% else %}
          <div class="col-xs-12 col-sm-12 col-md-10 col-lg-10"><span class="topic-genre">{{ selected_genre }}</span></div>
        {% endif %}

      {% for movie in all_movies %}
        <div class="col-xs-8 col-sm-8 col-md-3 col-lg-3">
          <div class="card">
            <img src={{movie.movie_thumbnail.url}} alt="image" class="img-poster">
            <p class="movie-name">{{movie.movie_name}}</p>
            <p class="movie-genre">{{movie.genre}}</p>
          </div>
        </div>
      {% endfor %}
      </div>
    </div>
  </form>
</div>
{% endblock %}
