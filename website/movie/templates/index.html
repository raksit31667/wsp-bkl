<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>BKL Movie Streaming Service</title>

    {% load staticfiles %}
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.css' %}">
    <script type="text/javascript" src="{% static 'jquery.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.js' %}"></script>
    <script type="text/javascript" src="{% static 'typeahead.bundle.js' %}"></script>

  </head>

  <body>
    <div class="container-fluid">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#register-modal">Register</button>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#login-modal">Login</button>
      {% include 'register.html' %}
      {% include 'login.html' %}

      {{ all_movies_list }}

      <input class="typeahead" type="text" placeholder="Search...">
    </div>

    <script type="text/javascript">
      var substringMatcher = function(strs) {
        return function findMatches(q, cb) {
          var matches, substringRegex;

          // an array that will be populated with substring matches
          matches = [];

          // regex used to determine if a string contains the substring `q`
          substrRegex = new RegExp(q, 'i');

          // iterate through the pool of strings and for any string that
          // contains the substring `q`, add it to the `matches` array
          $.each(strs, function(i, str) {
            if (substrRegex.test(str)) {
              matches.push(str);
            }
          });

          cb(matches);
        };
      };

      var typeahead_data = {{ all_movies_list }};
        $(function () {
          $('.typeahead').typeahead({
            hint: true,
            highlight: true,
            minLength: 1
          },
          {
            name: 'movies',
            source: substringMatcher(typeahead_data)
          });
        });
    </script>
  </body>

</html>
